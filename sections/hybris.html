<template class="section-template">
    <section id="hybris">
        <header class="section-header">
            <div class="section-wrapper">
                <div class="header">
                    <h1 class="title">Hybris</h1>
                    <h3 class="title">LAV EN AFLEVERINGSPAKKE</h3>
                </div>
                <section>
                    <div class="btnContaier">
                            <button name="button" class="menuBtn" id="hybris-tab-structure">Skab Mappestruktur</button>
                            <button name="button" class="menuBtn" id="hybris-tab-statistics">Skab Script Fil</button>
                            <button name="button" class="menuBtn" id="hybris-tab-metdata">Skab Metadata</button>
                    </div>
                    <hr class="button-divider">
                    <div id="hybris-panel-statistics" class="formularContainer" hidden="true">
                        <h3>TRIN 1: Vælg datafil</h3>
                        <p>
                            Vælg statistikfilen som udtræk skal laves fra 
                            <i id="hybris-message-statistics-filepath" class="far fa-question-circle" ></i>
                            <span id="hybris-message-statistics-filepath-Title" hidden="true">Vælg statistikfil</span>
                            <span id="hybris-message-statistics-filepath-Text" hidden="true">Vælg den statistikfil, du ønsker at lave udtræk fra.<br/>Filen skal være en af følgende formater: .sas (SAS-fil), .dta (Stata-fil) eller .sav (SPSS-fil).<br/>Når der udtrækkes data fra en SAS-fil med katalog, skal katalogfilen (sas7bcat eller sa7bdat) placeres i samme mappe som den valgte SAS-fil (.sas), der skal laves udtræk fra. Katalogfilen skal være navngivet med samme navn som statistikfilen.
                            </span>
                        </p>
                        <div>
                            <input type="text" id="hybris-statistics-filepath">
                            <button id="hybris-select-statistics-file">Browse...</button>
                        </div>
                        <button id="hybris-statistics-okBtn">Ok</button>
                        <span id="hybris-output-statistics-Error" hidden="true"><br/>Error: {0}</span>
                        <span id="hybris-message-statistics-SASCatalogWarning-Title" hidden="true">SAS fil uden katalog</span>
                        <span id="hybris-message-statistics-SASCatalogWarning-Text" hidden="true">Du er ved at udtrække data fra en SAS-fil uden katalog. Når der udtrækkes data for en SAS-fil med katalog, skal katalogfilen (.sas7bcat) placeres i samme mappe som den valgte SAS-datafil (.sas7bdat), der skal laves udtræk fra og navngives på samme måde som datafilen.</span>
                    </div>
                    <div id="hybris-panel-script" class="formularContainer" hidden="true">
                        <h3>TRIN 2: Kør eksport script i statistikprogram</h3>
                        <span id="hybris-output-script-OKCopyScript">
                            <br/>{0} scriptet {1} til eksport af data og metadata fra statistikfil {2} er dannet og placeret i mappen: </span><a id="hybris-output-script-dataPath"></a>
                        <span id="hybris-output-script-OKCopyScriptInfo">
                            <br/><br/>Du skal nu køre scriptet {0} i dit statistikprogram før du klikker på OK knappen
                            <br/><br/>Sådan gøre du:
                            <br/>
                        </span>
                        <button id="hybris-script-okBtn">Ok</button>
                        <span id="hybris-output-script-Error" hidden="true"><br/>Error: {0}</span>
                        
                    </div>
                    <div id="hybris-panel-metdata" class="formularContainer" hidden="true">
                        <h3>Indtast information om statistikfilen</h3>
                        <br>
                        <span><label class="descriptionLabel" for="dataFileName">Datafilnavn*</label><input type="text" name="dataFileName" id="fileName"></span><i class="far fa-question-circle"></i><br>
                        <span><label class="descriptionLabel" for="dataFileDescription">Datafilbeskrivelse*</label><input type="text" name="dataFileDescription" id="fileDescription"></span><i class="far fa-question-circle"></i><br>
                        <span><label class="descriptionLabel" for="keyVariable">Nøglevariabel</label><input type="text" name="keyVariable" id="keyVar"></span><i class="far fa-question-circle"></i><br>
                        <br>
                        <h4>Angiv reference til anden datafil i afleveringspakken</h4>
                        <span><label class="descriptionLabel" for="foreignDataFileName">Fremmeddatafilnavn</label><input type="text" name="foreignDataFileName" id="foreignFileName"><i class="far fa-question-circle"></i></span><br>
                        <span><label class="descriptionLabel" for="foreignVariableName">Fremmevaiabelnavn</label><input type="text" name="foreignVariableName" id="foreignKeyVarName"><i class="far fa-question-circle"></i></span><br>
                        <span><label class="descriptionLabel" for="referenceVariable">Referencevariabel</label><input type="text" name="referenceVariable" id="refVar"><i class="far fa-question-circle"></i></span><br>
                        <br>
                        <button type="submit" id="metadata-okBtn">OK</button>                        
                    </div>
                    <div id="hybris-panel-structure" class="formularContainer">
                        <h3>Skab en afleveringspakke</h3>
                        <p>
                            Indtast løbenummer for afleveringspakken 
                            <i id="hybris-message-delivery-package" class="far fa-question-circle" ></i>
                            <span id="hybris-message-delivery-package-Title" hidden="true">Løbenummer</span>
                            <span id="hybris-message-delivery-package-Text" hidden="true">Indtast det løbenummer for afleveringspakken, du har fået udleveret af Rigsarkivet. Det udleverede løbenummer fremgår af aflevringsbestemmelsen og arkivskabeskrivelsesfilen (archiveIndex.xml). Det består udelukkende af minimum 5 cifre uden foranstillede nuller. Indtastes løbenummer ikke, får afleveringspakken midlertidigt nummeret 99999. Løbenummer kan ændres senere.</span>
                        </p>
                        <input type="text" id="hybris-delivery-package">
                        <br>
                        <p>
                            Vælg destination for afleveringspakken 
                            <i id="hybris-message-path" class="far fa-question-circle"></i>
                            <span id="hybris-message-path-Title" hidden="true">Destination</span>
                            <span id="hybris-message-path-Text" hidden="true">Vælg det drev eller den mappe på computeren eller mediet (fx USB, harddisk, SSD), som afleveringspakken skal placeres på.</span>
                        </p>
                        <div>
                            <input type="text" id="hybris-path">
                            <button id="hybris-select-directory">Browse...</button>
                        </div>
                        <button id="hybris-okBtn">Ok</button>
                        <span id="hybris-output-RequiredPath" hidden="true"><br/>Destination for afleveringspakken mangler</span>
                        <span id="hybris-output-UnvalidDeliveryPackage" hidden="true"><br/>Det angivne løbenummer er ugyldigt. Løbenummer kan kun bestå af tal sammensat af minimum 5 cifre uden foranstillede nuller</span>
                        <span id="hybris-output-Error" hidden="true"><br/>Error: {0}</span>
                        <span id="hybris-output-Exists" hidden="true"><br/>Afleveringspakken [{0}] eksisterer</span>
                        <span id="hybris-output-Ok" hidden="true"><br/>En tom mappestruktur for afleveringspakken [{0}] er dannet og placeret her: </span><a id="hybris-select-delivery-package" hidden="true"></a>
                        <span id="hybris-output-Supplement" hidden="true">
                            <br/><br/>Du kan nu udtrække data- og metadata fra din statstikfil (SPSS, SAS eller State) til de data- og metadatafiler der skal placeres i afleveringspakken.
                            <br/><br/>Eller du kan placere indexfiler og kontekstdokumenter i afleveringspakken.
                            <br/><br/>Anvend fanebladene ovenfor.
                        </span>
                    </div>
                </section>
            </div>
        </header>
        <script type="text/javascript">
            require('./assets/js/utilities');
            require('./assets/js/messages');
            require('./assets/js/panels');
            require('./assets/js/structure');
            require('./assets/js/dataextraction');
            require('./assets/js/addMetaData');

            Rigsarkiv.Panels.initialize(["hybris-tab-structure","hybris-tab-statistics","hybris-tab-metdata"]);
            Rigsarkiv.Messages.initialize(["hybris-message-delivery-package","hybris-message-path","hybris-message-statistics-filepath"]);
            Rigsarkiv.Structure.initialize("hybris-select-directory","hybris-path","hybris-delivery-package","hybris-okBtn","hybris-output-Error","hybris-output-Exists","hybris-output-RequiredPath","hybris-output-UnvalidDeliveryPackage","hybris-output-Ok","hybris-output-Supplement","hybris-select-delivery-package");          
            Rigsarkiv.DataExtraction.initialize(Rigsarkiv.Structure.callback,"hybris-select-statistics-file","hybris-statistics-filepath","hybris-statistics-okBtn","hybris-output-statistics-Error","hybris-output-script-OKCopyScript","hybris-message-statistics-SASCatalogWarning","hybris-panel-script","hybris-script-okBtn","hybris-output-script-dataPath","hybris-output-script-OKCopyScriptInfo");
            Rigsarkiv.MetaData.initialize("fileName", "dataFileDescription", "keyVar", "foreignFileName", "foreignKeyVarName", "refVar", "metadata-okBtn");
          </script>
    </section>
</template>
