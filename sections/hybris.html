<template class="section-template">
    <section id="hybris">
        <header class="section-header">
            <div class="section-wrapper">
                <div class="header">
                    <h1 class="title">HYBRIS - Skab en afleveringspakke</h1>
                </div>
                <section>
                    <div class="btnContaier">
                        <button name="button" class="menuBtn" id="hybris-tab-structure">Skab Mappestruktur</button>
                        <button name="button" class="menuBtn" id="hybris-tab-statistics">Skab Script Fil</button>
                        <button name="button" class="menuBtn" id="hybris-tab-metdata">Skab Metadata</button>
                        <button name="button" class="menuBtn" id="hybris-tab-indexfiles">Indexfiler</button>
                    </div>
                    <hr class="button-divider">
                    <div id="hybris-panel-structure" class="formularContainer">
                        <p>
                            <h2>Mappestruktur</h2>
                        </p>
                        <p>
                            Du kan her skabe en tom mappestruktur til afleveringspakken.  
                        </p>
                        <div class="light-turkish"><h4>Skab en tom mappestruktur:</h4></div>
                        <p>
                            Indtast løbenummer for afleveringspakken
                            <i id="hybris-message-structure-delivery-package" class="far fa-question-circle"></i>
                            <span id="hybris-message-structure-delivery-package-Title" hidden="true">Løbenummer</span>
                            <span id="hybris-message-structure-delivery-package-Text" hidden="true">Indtast det løbenummer for afleveringspakken, du har fået udleveret af Rigsarkivet. Det udleverede løbenummer fremgår af aflevringsbestemmelsen og arkivskabeskrivelsesfilen (archiveIndex.xml). Det består udelukkende af minimum 5 cifre uden foranstillede nuller. Indtastes løbenummer ikke, får afleveringspakken midlertidigt nummeret 99999. Løbenummer kan ændres senere.</span>
                        </p>
                        <input type="text" id="hybris-structure-delivery-package">
                        <br>
                        <p>
                            Vælg destination for afleveringspakken
                            <i id="hybris-message-structure-path" class="far fa-question-circle"></i>
                            <span id="hybris-message-structure-path-Title" hidden="true">Destination</span>
                            <span id="hybris-message-structure-path-Text" hidden="true">Vælg det drev eller den mappe på computeren eller mediet (fx USB, harddisk, SSD), som afleveringspakken skal placeres på.</span>
                        </p>
                        <div>
                            <input type="text" id="hybris-structure-path">
                            <button id="hybris-select-structure-directory">Browse...</button>
                        </div>
                        <button id="hybris-structure-okBtn">Ok</button>
                        <span id="hybris-output-structure-RequiredPath-Title" hidden="true">Afleveringspakken mangler</span>
                        <span id="hybris-output-structure-RequiredPath-Text" hidden="true">Destination for afleveringspakken mangler</span>
                        <span id="hybris-output-structure-UnvalidDeliveryPackage-Title" hidden="true">Det angivne løbenummer er ugyldigt</span>
                        <span id="hybris-output-structure-UnvalidDeliveryPackage-Text" hidden="true">Løbenummer kan kun bestå af tal sammensat af minimum 5 cifre uden foranstillede nuller</span>
                        <span id="hybris-output-structure-Error" hidden="true"><br />Error: {0}</span>
                        <span id="hybris-output-structure-Exists-Title" hidden="true">Afleveringspakken Eksisterer</span>
                        <span id="hybris-output-structure-Exists-Text" hidden="true">Afleveringspakken [{0}] eksisterer</span>
                        <span id="hybris-output-structure-Ok" hidden="true"><br /><br /><strong>Bekræftelse!</strong> En tom mappestruktur for afleveringspakke [{0}] er nu skabt og placeret i mappen [</span>
                        <a id="hybris-structure-select-delivery-package" hidden="true"></a> 
                        <span id="hybris-output-structure-Supplement" hidden="true">]<br/> Klik på knappen "Næste", hvis du vil lave udtræk af data- og metadata fra dine statistikfiler til denne afleveringspakke.</span>
                        <br /><br />
                        <button id="hybris-structure-nextBtn" hidden="true">Næste</button>
                    </div>
                    <div id="hybris-panel-statistics" class="formularContainer" hidden="true">
                        <p>
                            <h2>Udtræk data - TRIN 1</h2>
                        </p>
                        <p>
                            Du kan her udtrække data- og metadata fra dine statistikfiler til den tomme afleveringspakke du lige har skabt.  
                            <br/>
                            <br/> Udtrækket består af 3 trin for hver statistikfil: 
                            <br/> TRIN 1: Vælg statistikfil
                            <br/> TRIN 2: Kør export script i dit statistikprogram
                            <br/> TRIN 3: Indtast informationer om statistikfilen
                        </p>
                        <h3>TRIN 1: Vælg datafil</h3>
                        <p>
                            Vælg statistikfilen som udtræk skal laves fra
                            <i id="hybris-message-statistics-filepath" class="far fa-question-circle"></i>
                            <span id="hybris-message-statistics-filepath-Title" hidden="true">Vælg statistikfil</span>
                            <span id="hybris-message-statistics-filepath-Text" hidden="true">Vælg den statistikfil, du ønsker at lave udtræk fra.<br />Filen skal være en af følgende formater: .sas (SAS-fil), .dta (Stata-fil) eller .sav (SPSS-fil).<br />Når der udtrækkes data fra en SAS-fil med katalog, skal katalogfilen (sas7bcat eller sa7bdat) placeres i samme mappe som den valgte SAS-fil (.sas), der skal laves udtræk fra. Katalogfilen skal være navngivet med samme navn som statistikfilen.
                            </span>
                        </p>
                        <div>
                            <input type="text" id="hybris-statistics-filepath">
                            <button id="hybris-select-statistics-file">Browse...</button>
                        </div>
                        <button id="hybris-statistics-okBtn">Ok</button>
                        <span id="hybris-output-statistics-RequiredPath" hidden="true"><br/>Destination for statistikfilen mangler</span>
                        <span id="hybris-output-statistics-Error" hidden="true"><br/>Error: {0}</span>
                        <span id="hybris-message-statistics-SASCatalogWarning-Title" hidden="true">SAS fil uden katalog</span>
                        <span id="hybris-message-statistics-SASCatalogWarning-Text" hidden="true">Du er ved at udtrække data fra en SAS-fil uden katalog. Når der udtrækkes data for en SAS-fil med katalog, skal katalogfilen (.sas7bcat) placeres i samme mappe som den valgte SAS-datafil (.sas7bdat), der skal laves udtræk fra og navngives på samme måde som datafilen.</span>
                        <div id="hybris-panel-script" hidden="true">
                            <h3>TRIN 2: Kør eksport script i statistikprogram</h3>
                            <span id="hybris-output-script-OKCopyScript">
                                <br/>{0} scriptet {1} til eksport af data og metadata fra statistikfil {2} er dannet og placeret i mappen: </span><a id="hybris-output-script-dataPath"></a>
                            <span id="hybris-output-script-OKCopyScriptInfo">
                                <br/><br/>Du skal nu køre scriptet {0} i dit statistikprogram før du klikker på OK knappen
                                <br/><br/>Sådan gøre du:
                                <br/>
                                <ol>
                                    <li>Lad dette værktøj kør (luk det ikke ned)</li>
                                    <li>Åben scriptet i {1} og eksekver det.</li>
                                    <li>Vend tilbag til dette program og klik OK på knappen nedenfor, når scriptet er køret færdig.</li>
                                </ol>
                                <br/>
                            </span>
                            <button id="hybris-script-okBtn">Ok</button>
                            <span id="hybris-output-script-Ok" hidden="true"><br/>Der er udtrukket data og metadata fra statistikfilen</span>
                            <span id="hybris-output-script-Error" hidden="true"><br/>Error: {0}</span>
                            <span id="hybris-output-script-RequiredFilesWarning-Title" hidden="true">Data og metadata fra statistikfilen</span>
                            <span id="hybris-output-script-RequiredFilesWarning-Text" hidden="true">Der er ikke udtrukket data og metadata fra statistikfilen. Kør export scriptet i dit statistikprogram før du klikker på OK. Hvis du fortsætter uden at køre scriptet vil data- og metadatafil være tomme.</span>
                            <span id="hybris-output-script-EncodingFileError-Title" hidden="true">Fil encoding</span>
                            <span id="hybris-output-script-EncodingFileError-Text" hidden="true">Filen {0} indeholder karakterer som ikke er UTF-8 tegn. Statistikfilen, der laves udtræk fra, skal være indkodet som UTF-8 før dataudtræk laves med Hybris.  Du skal ændre encoding for statistikfilen i dit statistikprogram og lave nyt dataudtæk med Hybris.</span>
                        </div>
                    </div>
                    <div id="hybris-panel-metdata" class="formularContainer" hidden="true">
                        <h3>Indtast information om statistikfilen</h3>
                        <br>
                        <span>
                            <label class="descriptionLabel" for="hybrismetdatafileName">Datafilnavn*</label>
                            <input type="text" name="hybrismetdatafileName" id="hybris-metdata-fileName">
                        </span>
                        <i id="hybris-message-metdata-fileName" class="far fa-question-circle"></i>
                        <span id="hybris-message-metdata-fileName-Title" hidden="true">DATAFILNAVN</span>
                        <span id="hybris-message-metdata-fileName-Text" hidden="true">Navn på datafilen, som den benævnes i brugssammenhæng.</span>
                        <br>
                        <span>
                            <label class="descriptionLabel" for="hybrismetdatafileDescription">Datafilbeskrivelse*</label>
                            <input type="text" name="hybrismetdatafileDescription" id="hybris-metdata-fileDescription">
                        </span>
                        <i id="hybris-message-metdata-fileDescription" class="far fa-question-circle"></i>
                        <span id="hybris-message-metdata-fileDescription-Title" hidden="true">DATAFILBESKRIVELSE</span>
                        <span id="hybris-message-metdata-fileDescription-Text" hidden="true">Beskrivelse af datafilens indhold.</span>
                        <br>
                        <span>
                            <label class="descriptionLabel" for="hybrismetdatakeyVar">Nøglevariabel</label>
                            <input type="text" name="hybrismetdatakeyVar" id="hybris-metdata-keyVar">
                        </span>
                        <i id="hybris-message-metdata-keyVariable" class="far fa-question-circle"></i>
                        <span id="hybris-message-metdata-keyVariable-Title" hidden="true">NØGLEVARIABEL</span>
                        <span id="hybris-message-metdata-keyVariable-Text" hidden="true">Datafilens unikke nøglevariabel angivet med navne på den/de variable, nøglevariablen består af. Flere variabelnavne adskilles med mellemrum.</span>
                        <br>
                        <br>
                        <h4>Angiv reference til anden datafil i afleveringspakken</h4>
                        <span>
                            <label class="descriptionLabel" for="hybrismetdataforeignFileName">Fremmeddatafilnavn</label>
                            <input type="text" name="hybrismetdataforeignFileName" id="hybris-metdata-foreignFileName">
                        </span>
                        <i id="hybris-message-metdata-foreignFile" class="far fa-question-circle"></i>
                        <span id="hybris-message-metdata-foreignFile-Title" hidden="true">REFERENCE (fremmeddatafil)</span>
                        <span id="hybris-message-metdata-foreignFile-Text" hidden="true">Navn på den anden datafil der refereres til (fremmeddatafil)</span>
                        <br>
                        <span>
                            <label class="descriptionLabel" for="hybrismetdataforeignKeyVarName">Fremmevaiabelnavn</label>
                            <input type="text" name="hybrismetdataforeignKeyVarName" id="hybris-metdata-foreignKeyVarName">
                        </span>
                        <i id="hybris-message-metdata-foreignVariable" class="far fa-question-circle"></i>
                        <span id="hybris-message-metdata-foreignVariable-Title" hidden="true">REFERENCE (fremmedvariabel)</span>
                        <span id="hybris-message-metdata-foreignVariable-Text" hidden="true">Variabelnavn(e) for fremmeddatafilens nøglevariabel (fremmedvariable)</span>
                        <br>
                        <span>
                            <label class="descriptionLabel" for="hybrismetdatarefVar">Referencevariabel</label>
                            <input type="text" name="hybrismetdatarefVar" id="hybris-metdata-refVar">
                        </span>
                        <i id="hybris-message-metdata-referenceVariable" class="far fa-question-circle"></i>
                        <span id="hybris-message-metdata-referenceVariable-Title" hidden="true">REFERENCE (referencevariabel)</span>
                        <span id="hybris-message-metdata-referenceVariable-Text" hidden="true">Variabelnavn(e) for den/de variable i datafilen der laves udtræk fra (referencevariabel), som refererer til fremmedvariablen i fremmeddatafilen.</span>
                        <br>
                        <br>
                        <button type="submit" id="hybris-metdata-okBtn">OK</button>
                        <span id="hybris-output-metdata-Error" hidden="true"><br/>Error: {0}</span>
                        <span id="hybris-output-metdata-Ok" hidden="true"><br />Data- og metadatafil er nu udtrukket fra statistikfilen {0} og placeret her:</span><a id="hybris-output-metdata-path" hidden="true"></a>
                        <span id="hybris-output-metdata-NewExtraction" hidden="true"><br /><br />Hvis du skal udtrække data fra flere statistikfiler, som ingår i afleveringspakke [{0}] så klik knappen "Nyt udtræk"<br /></span>
                        <button id="hybris-metdata-NewExtractionBtn" hidden="true">NYT UDTRÆK</button>
                        <span id="hybris-output-metdata-Exit" hidden="true"><br /><br />Hvis der ikke skal tilføjes flere dataudtræk til afleveringspakken, så klik på "Afslut"<br /></span>
                        <button id="hybris-metdata-ExitBtn" hidden="true">AFSLUT</button>
                        <span id="hybris-output-metdata-fileNameRequired" hidden="true"><br/>Datafilnavn skal udfyldes</span>
                        <span id="hybris-output-metdata-fileDescrRequired" hidden="true"><br/>Datafilbeskrivelse skal udfyldes</span>
                        <span id="hybris-output-metdata-fileNameNumberFirst" hidden="true"><br/>Det angivne datafilnavn begynder med et tal. Dette er ikke lovligt.</span>
                        <span id="hybris-output-metdata-fileNameIllegalChar" hidden="true"><br/>Det angivne datafilnavn indeholder ulovlige tegn. Kun tal, bogstaver og underscore er lovlige tegn for et datafilnavn</span>
                        <span id="hybris-output-metdata-fileNameLength" hidden="true"><br/>Det angivne datafilnavn er længere end den tilladte længde på 128 tegn. Forkort datafilnavnet.</span>
                        <span id="hybris-output-metdata-fileNamereservedWord" hidden="true"><br/>Det angivne datafilnavn er et reserveret ord i SQL 99 standarden. Omkrans datafilnavnet med dobbeltapostrof eller omdøb datafilnavnet.</span>
                    </div> 
                    <div id="hybris-panel-indexfiles" class="formularContainer" hidden="true">
                        <h3>Opload indexfiler til afleveringspakken</h3>
                        <span id="hybris-output-indexfiles-Description">Her kan du oploade indexfilerne archiveIndex.xml (arkivbeskrivelsesfilen) og contextDocumentationIndex.xml til mappen Indices i afleveringspakken.</span>
                        <span id="hybris-output-indexfiles-Summary">Indexfilerne skal være godkendte af Rigsarkivet.</span>
                        <p>
                            Vælg archiveIndex.xml
                            <i id="hybris-message-indexfiles-archiveIndex" class="far fa-question-circle"></i>
                            <span id="hybris-message-indexfiles-archiveIndex-Title" hidden="true">archiveIndex.xml</span>
                            <span id="hybris-message-indexfiles-archiveIndex-Text" hidden="true">Indexfilen archiveIndex.xml er en arkivbeskrivelsesfil, der indeholder metadata om afleveringspakken, fx navn på den forsker der har skabt data, perioden data dækker, beskrivelse af indhold osv. Det er den godkendte archiveIndex.xml som du har modtaget fra Rigsarkivet, som du skal uploade til </span>
                        </p>
                        <div>
                            <input type="text" id="hybris-indexfiles-archiveIndex">
                            <button id="hybris-indexfiles-archiveIndex-selectFile">Browse...</button>
                        </div>
                        <p>
                            Vælg contextDocumentationIndex.xml
                            <i id="hybris-message-indexfiles-contextDocumentationIndex" class="far fa-question-circle"></i>
                            <span id="hybris-message-indexfiles-contextDocumentationIndex-Title" hidden="true">contextDocumentationIndex.xml</span>
                            <span id="hybris-message-indexfiles-contextDocumentationIndex-Text" hidden="true">Indexfilen contextDocumentationIndex.xml indeholder oplysninger om kontekstdokumenterne i afleveringspakken, fx dokumenttitel, dokumentdato og opmærkning af dokumentkategori. Det er den godkendte contextDocumentationIndex.xml, som du har modtaget fra Rigsarkivet, du skal uploade til afleveringspakken.</span>
                        </p>
                        <div>
                            <input type="text" id="hybris-indexfiles-contextDocumentationIndex">
                            <button id="hybris-indexfiles-contextDocumentationIndex-selectFile">Browse...</button>
                        </div>
                        <button id="hybris-indexfiles-okBtn">Ok</button>
                        <span id="hybris-output-indexfiles-Error" hidden="true"><br />Error: {0}</span>
                        <span id="hybris-output-indexfiles-RequiredPath" hidden="true"><br />Ingen filer er valgt.</span>
                        <span id="hybris-output-indexfiles-Ok" hidden="true"><br />Filerne [{0}], [{1}] er nu kopieret til mappen : </span>
                        <a id="hybris-indexfiles-delivery-package" hidden="true"></a>
                    </div>                   
                </section>
            </div>
        </header>
        <script type="text/javascript">
            require('./assets/js/utilities');
            require('./assets/js/messages');
            require('./assets/js/panels');
            require('./assets/js/structure');
            require('./assets/js/dataextraction');
            require('./assets/js/metadata');
            require('./assets/js/indexfiles');

            Rigsarkiv.Panels.initialize(["hybris-tab-structure","hybris-tab-statistics","hybris-tab-metdata","hybris-tab-indexfiles"]);
            Rigsarkiv.Messages.initialize(["hybris-message-structure-delivery-package","hybris-message-structure-path","hybris-message-statistics-filepath","hybris-message-metdata-fileName","hybris-message-metdata-fileDescription","hybris-message-metdata-keyVariable","hybris-message-metdata-foreignFile","hybris-message-metdata-foreignVariable","hybris-message-metdata-referenceVariable","hybris-message-indexfiles-archiveIndex","hybris-message-indexfiles-contextDocumentationIndex"]);
            Rigsarkiv.Structure.initialize("hybris-select-structure-directory","hybris-structure-path","hybris-structure-delivery-package","hybris-structure-okBtn","hybris-output-structure-Error","hybris-output-structure-Exists","hybris-output-structure-RequiredPath","hybris-output-structure-UnvalidDeliveryPackage","hybris-output-structure-Ok","hybris-structure-select-delivery-package","hybris-structure-nextBtn","hybris-tab-statistics","hybris-output-structure-Supplement");          
            Rigsarkiv.DataExtraction.initialize(Rigsarkiv.Structure.callback,"hybris-select-statistics-file","hybris-statistics-filepath","hybris-statistics-okBtn","hybris-output-statistics-Error","hybris-output-script-OKCopyScript","hybris-message-statistics-SASCatalogWarning","hybris-panel-script","hybris-script-okBtn","hybris-output-script-dataPath","hybris-output-script-OKCopyScriptInfo","hybris-output-statistics-RequiredPath","hybris-output-script-RequiredFilesWarning","hybris-output-script-Ok","hybris-output-script-EncodingFileError");
            Rigsarkiv.MetaData.initialize(Rigsarkiv.DataExtraction.callback,"hybris-metdata-fileName", "hybris-metdata-fileDescription", "hybris-metdata-keyVar", "hybris-metdata-foreignFileName", "hybris-metdata-foreignKeyVarName", "hybris-metdata-refVar", "hybris-metdata-okBtn", "hybris-output-metdata-fileNameRequired", "hybris-output-metdata-fileNameNumberFirst", "hybris-output-metdata-fileNameIllegalChar","hybris-output-metdata-Ok","hybris-output-metdata-path","hybris-output-metdata-Error","hybris-output-metdata-NewExtraction","hybris-metdata-NewExtractionBtn","hybris-tab-statistics","hybris-output-metdata-Exit","hybris-metdata-ExitBtn","hybris-tab-structure","hybris-output-metdata-fileNameLength","hybris-output-metdata-fileNamereservedWord","hybris-output-metdata-fileDescrRequired");
            Rigsarkiv.IndexFiles.initialize(Rigsarkiv.Structure.callback,"hybris-indexfiles-archiveIndex-selectFile","hybris-indexfiles-archiveIndex","hybris-indexfiles-contextDocumentationIndex-selectFile","hybris-indexfiles-contextDocumentationIndex","hybris-indexfiles-okBtn","hybris-output-indexfiles-Error","hybris-output-indexfiles-RequiredPath","hybris-output-indexfiles-Ok","hybris-indexfiles-delivery-package");
          </script>
    </section>
</template>